<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE mapper  
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<mapper namespace="com.hy2yang.demo.dao.RecordDao">
 
    <cache size="1024" flushInterval="60000" eviction="LRU" readOnly="false"></cache>
    
    <resultMap id="recordResultMap" type="com.hy2yang.demo.entity.Record" >  
        <id property="id" column="id"/>  
        <result property="message" column="message"/>  
        <result property="URL" column="URL"/>  
        <result property="group" column="group"/> 
    </resultMap>   
    
    <!-- adding -->  
    <insert id="add" parameterType="Map" statementType="STATEMENT">  
        insert into ${tableKey} values(null,${r_message},${r_URL},${r_group})  
    </insert>  
     
    <select id="getRecordById" parameterType="Integer" resultMap="recordResultMap" statementType="STATEMENT">  
        select * from ${tableKey} where id=${id}  
    </select> 
     
    <select id="find" parameterType="Map" resultMap="recordResultMap" statementType="STATEMENT">  
        select * from ${tableKey}
        <if test="start!=null and size!=null">  
            limit ${start},${size}  
        </if> 
    </select> 
     
    <select id="getTotal" parameterType="Map" resultType="Long" statementType="STATEMENT">  
        select count(*) from ${tableKey} 
    </select> 
     
    <!-- deletion -->  
    <delete id="delete" statementType="STATEMENT">  
        delete from ${tableKey} where id = ${id}  
    </delete> 
     
    <!-- update -->  
    <update id="update" parameterType="com.hy2yang.demo.entity.Record" statementType="STATEMENT">  
        update ${tableKey}  
        <set>  
            <if test="message != null and message != ''">message = ${message},</if>  
            <if test="URL != null and URL != ''">URL = ${URL},</if>  
            <if test="group != null and group != ''">group = ${group},</if> 
        </set>  
        where id = ${id}  
    </update>  
</mapper>  