<?xml version="1.0" encoding="UTF-8"?>  
<!DOCTYPE mapper  
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<mapper namespace="com.hy2yang.demo.dao.RecordDao">  
     <!-- 定义缓存  一般是一级缓存，如果用同一个sqlsession 那么相同查询直接会从缓存中查找 -->  
    <cache size="1024" flushInterval="60000" eviction="LRU" readOnly="false"></cache>  
    
    <!-- 增加 -->  
    <insert id="add" parameterType="com.hy2yang.demo.entity.Record">  
        insert into users values(null,#{message},#{URL},#{group})  
    </insert>  
    <resultMap id="recordResultMap" type="com.hy2yang.demo.entity.Record" >  
        <id property="id" column="id"/>  
        <result property="message" column="message"/>  
        <result property="URL" column="URL"/>  
        <result property="group" column="group"/> 
    </resultMap>  
    <select id="getRecordById" parameterType="Integer" resultMap="recordResultMap">  
        select * from users where id=#{id}  
    </select>  
    <select id="find" parameterType="com.hy2yang.demo.entity.Record" resultMap="recordResultMap">  
        select * from users   
        <where>  
            <if test="message!=null and message!='' ">  
                and message like #{message}  
            </if> 
        </where>
    </select>  
    <select id="getTotal" parameterType="Map" resultType="Long">  
        select count(*) from users  
        <where>  
            <if test="message!=null and message!='' ">  
                and message like #{message}  
            </if>  
        </where>  
    </select>  
    <!-- 用户删除 -->  
    <delete id="delete" parameterType="Integer">  
        delete from users where id = #{id}  
    </delete>  
    <!-- 用户修改 -->  
    <update id="update" parameterType="com.hy2yang.demo.entity.Record">  
        update users  
        <set>  
            <if test="message != null and message != ''">message = #{message},</if>  
            <if test="URL != null and URL != ''">URL = #{URL},</if>  
            <if test="group != null and group != ''">group = #{group},</if> 
        </set>  
        where id = #{id}  
    </update>  
</mapper>  